# ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ç¬¬ä¸€æ­¥ï¼šå®‰è£… Docker Desktop

### Windows å®‰è£…
1. ä¸‹è½½ï¼šhttps://www.docker.com/products/docker-desktop/
2. è¿è¡Œå®‰è£…ç¨‹åº
3. é‡å¯ç”µè„‘
4. å¯åŠ¨ Docker Desktop

### éªŒè¯å®‰è£…
```powershell
docker --version
docker-compose --version
```

## ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š
```env
# æ•°æ®åº“å¯†ç ï¼ˆå¿…é¡»ä¿®æ”¹ï¼ï¼‰
DB_PASSWORD=your_super_secure_password_here

# JWT å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼è‡³å°‘32å­—ç¬¦ï¼‰
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long

# å‰ç«¯åœ°å€ï¼ˆéƒ¨ç½²åæ”¹ä¸ºå®é™…åŸŸåï¼‰
FRONTEND_URL=http://localhost:3000

# API åœ°å€ï¼ˆéƒ¨ç½²åæ”¹ä¸ºå®é™…åŸŸåï¼‰
API_URL=http://localhost:5000/api
```

## ç¬¬ä¸‰æ­¥ï¼šä¸€é”®å¯åŠ¨

```powershell
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## ç¬¬å››æ­¥ï¼šè®¿é—®åº”ç”¨

- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯ APIï¼šhttp://localhost:5000
- æ•°æ®åº“ï¼šlocalhost:5432

## ğŸŒ éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨

### å‡†å¤‡å·¥ä½œ
1. è´­ä¹°æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘/AWSï¼‰
2. å®‰è£… Docker å’Œ Docker Compose
3. é…ç½®åŸŸåè§£æ

### æœåŠ¡å™¨ä¸Šéƒ¨ç½²

```bash
# 1. ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨
git clone your-repo-url
cd your-project

# 2. é…ç½®ç¯å¢ƒå˜é‡
nano .env
# ä¿®æ”¹ï¼š
# - DB_PASSWORDï¼ˆå¼ºå¯†ç ï¼‰
# - JWT_SECRETï¼ˆéšæœºé•¿å­—ç¬¦ä¸²ï¼‰
# - FRONTEND_URL=https://your-domain.com
# - API_URL=https://api.your-domain.com

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. é…ç½® Nginxï¼ˆå¦‚æœéœ€è¦ HTTPSï¼‰
```

## ğŸ”’ å®‰å…¨é…ç½®ï¼ˆé‡è¦ï¼ï¼‰

### 1. ä¿®æ”¹é»˜è®¤å¯†ç 
```env
DB_PASSWORD=ä½¿ç”¨å¼ºå¯†ç ï¼Œè‡³å°‘16ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯æ•°å­—ç‰¹æ®Šå­—ç¬¦
JWT_SECRET=ä½¿ç”¨éšæœºç”Ÿæˆçš„é•¿å­—ç¬¦ä¸²
```

### 2. é…ç½®é˜²ç«å¢™
```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
ufw allow 80/tcp    # HTTP
ufw allow 443/tcp   # HTTPS
ufw allow 22/tcp    # SSH
ufw enable
```

### 3. é…ç½® HTTPSï¼ˆä½¿ç”¨ Let's Encryptï¼‰
```bash
# å®‰è£… Certbot
apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
certbot --nginx -d your-domain.com
```

### 4. å®šæœŸå¤‡ä»½æ•°æ®åº“
```bash
# å¤‡ä»½è„šæœ¬
docker exec postgres pg_dump -U postgres blueprint_saas > backup_$(date +%Y%m%d).sql

# è®¾ç½®å®šæ—¶ä»»åŠ¡
crontab -e
# æ·»åŠ ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /path/to/backup-script.sh
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f postgres
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend
```

### æ›´æ–°ä»£ç 
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

### æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤
```bash
# å¤‡ä»½
docker exec postgres pg_dump -U postgres blueprint_saas > backup.sql

# æ¢å¤
docker exec -i postgres psql -U postgres blueprint_saas < backup.sql
```

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. é…ç½® Nginx ç¼“å­˜
```nginx
# åœ¨ nginx.conf ä¸­æ·»åŠ 
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m;
proxy_cache my_cache;
proxy_cache_valid 200 60m;
```

### 2. æ•°æ®åº“è¿æ¥æ± 
åœ¨ `server/src/db.ts` ä¸­è°ƒæ•´ï¼š
```typescript
const pool = new Pool({
  max: 20,  // æœ€å¤§è¿æ¥æ•°
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
});
```

### 3. å¯ç”¨ Gzip å‹ç¼©
å·²åœ¨ `nginx.conf` ä¸­é…ç½®

## ğŸ”§ æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
docker-compose logs

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep :5000
netstat -tulpn | grep :5432
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# è¿›å…¥æ•°æ®åº“å®¹å™¨
docker exec -it postgres psql -U postgres

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
\l

# æ£€æŸ¥è¡¨æ˜¯å¦åˆ›å»º
\c blueprint_saas
\dt
```

### å‰ç«¯æ— æ³•è¿æ¥åç«¯
1. æ£€æŸ¥ `.env` ä¸­çš„ `VITE_API_URL`
2. æ£€æŸ¥ CORS é…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“ˆ æ‰©å±•å»ºè®®

### 1. ä½¿ç”¨ Redis ç¼“å­˜
```yaml
# åœ¨ docker-compose.yml æ·»åŠ 
redis:
  image: redis:alpine
  ports:
    - "6379:6379"
```

### 2. é…ç½® CDN
- é™æ€èµ„æºä¸Šä¼ åˆ° OSS/S3
- é…ç½® CDN åŠ é€Ÿ

### 3. è´Ÿè½½å‡è¡¡
- ä½¿ç”¨ Nginx åšè´Ÿè½½å‡è¡¡
- å¯åŠ¨å¤šä¸ªåç«¯å®ä¾‹

### 4. ç›‘æ§å‘Šè­¦
- é›†æˆ Prometheus + Grafana
- é…ç½®é‚®ä»¶/çŸ­ä¿¡å‘Šè­¦

## ğŸ’° æˆæœ¬ä¼°ç®—

### åŸºç¡€é…ç½®ï¼ˆé€‚åˆå°å‹åº”ç”¨ï¼‰
- æœåŠ¡å™¨ï¼š2æ ¸4Gï¼Œçº¦ Â¥100/æœˆ
- åŸŸåï¼šçº¦ Â¥50/å¹´
- SSL è¯ä¹¦ï¼šLet's Encrypt å…è´¹
- **æ€»è®¡ï¼šçº¦ Â¥100/æœˆ**

### è¿›é˜¶é…ç½®ï¼ˆé€‚åˆä¸­å‹åº”ç”¨ï¼‰
- æœåŠ¡å™¨ï¼š4æ ¸8Gï¼Œçº¦ Â¥300/æœˆ
- æ•°æ®åº“ï¼šRDSï¼Œçº¦ Â¥200/æœˆ
- CDNï¼šæŒ‰æµé‡è®¡è´¹ï¼Œçº¦ Â¥50/æœˆ
- **æ€»è®¡ï¼šçº¦ Â¥550/æœˆ**

## ğŸ“ æ¨èå­¦ä¹ è·¯å¾„

1. âœ… æœ¬åœ° Docker éƒ¨ç½²ï¼ˆå½“å‰ï¼‰
2. âœ… æœåŠ¡å™¨éƒ¨ç½²
3. âœ… HTTPS é…ç½®
4. âœ… æ•°æ®åº“å¤‡ä»½
5. â¬œ Redis ç¼“å­˜
6. â¬œ è´Ÿè½½å‡è¡¡
7. â¬œ ç›‘æ§å‘Šè­¦
8. â¬œ CI/CD è‡ªåŠ¨éƒ¨ç½²

---

**ä¸‹ä¸€æ­¥ï¼šå®‰è£… Docker Desktopï¼Œç„¶åè¿è¡Œ `docker-compose up -d`**
