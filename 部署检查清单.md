# ✅ 部署检查清单

**日期**: 2026-02-01  
**平台**: Railway.app

---

## 📋 部署前准备

### 1. 代码准备
- [ ] 所有代码已提交到 Git
- [ ] 代码已推送到 GitHub
- [ ] package.json 配置正确
- [ ] Dockerfile 存在且正确
- [ ] .env.example 文件完整

### 2. 账号准备
- [ ] 已注册 GitHub 账号
- [ ] 已注册 Railway 账号
- [ ] Railway 已连接 GitHub

### 3. API 密钥准备（可选）
- [ ] Gemini API Key（用于 AI 功能）
- [ ] SMTP 配置（用于邮件通知）

---

## 🚀 Railway 部署步骤

### 第一步：创建项目
- [ ] 登录 Railway.app
- [ ] 点击 "New Project"
- [ ] 选择 "Deploy from GitHub repo"
- [ ] 选择 blueprint-saas 仓库

### 第二步：添加数据库
- [ ] 点击 "New" → "Database" → "PostgreSQL"
- [ ] 等待数据库创建完成
- [ ] 确认数据库状态为绿色 ✓

### 第三步：配置后端
- [ ] 添加后端服务（server 目录）
- [ ] 配置环境变量：
  - [ ] DATABASE_URL=${{Postgres.DATABASE_URL}}
  - [ ] DB_HOST=${{Postgres.PGHOST}}
  - [ ] DB_PORT=${{Postgres.PGPORT}}
  - [ ] DB_NAME=${{Postgres.PGDATABASE}}
  - [ ] DB_USER=${{Postgres.PGUSER}}
  - [ ] DB_PASSWORD=${{Postgres.PGPASSWORD}}
  - [ ] JWT_SECRET=（生成随机字符串）
  - [ ] NODE_ENV=production
  - [ ] PORT=5000
- [ ] 生成后端域名
- [ ] 记录后端地址：___________________________

### 第四步：配置前端
- [ ] 添加前端服务（根目录）
- [ ] 配置环境变量：
  - [ ] VITE_API_URL=https://后端地址/api
  - [ ] GEMINI_API_KEY=（可选）
- [ ] 配置构建命令：npm install && npm run build
- [ ] 配置启动命令：npx serve -s dist -p $PORT
- [ ] 生成前端域名
- [ ] 记录前端地址：___________________________

### 第五步：更新 CORS
- [ ] 回到后端服务
- [ ] 添加环境变量：CORS_ORIGIN=https://前端地址
- [ ] 等待后端重新部署

### 第六步：初始化数据库
- [ ] 安装 Railway CLI：npm install -g @railway/cli
- [ ] 登录：railway login
- [ ] 连接项目：railway link
- [ ] 运行迁移：railway run npm run migrate
- [ ] 或者在后端服务中配置自动迁移

---

## 🧪 部署验证

### 后端验证
- [ ] 访问：https://后端地址/health
- [ ] 返回：{"status":"ok","timestamp":"..."}
- [ ] 查看后端日志，无错误

### 前端验证
- [ ] 访问：https://前端地址
- [ ] 页面正常加载
- [ ] 可以看到登录界面
- [ ] 样式正常显示

### 功能验证
- [ ] 注册新用户
- [ ] 登录成功
- [ ] 创建组织
- [ ] 创建项目
- [ ] 添加模块
- [ ] 查看图表
- [ ] AI 分析（如果配置了 Gemini）

### 数据库验证
- [ ] 连接数据库：railway connect postgres
- [ ] 查看表：\dt
- [ ] 确认数据已保存

---

## 📊 监控检查

### 资源使用
- [ ] 查看 CPU 使用率
- [ ] 查看内存使用率
- [ ] 查看网络流量
- [ ] 查看免费额度剩余

### 日志检查
- [ ] 后端日志无错误
- [ ] 前端日志无错误
- [ ] 数据库连接正常

### 性能检查
- [ ] 页面加载速度 < 3 秒
- [ ] API 响应时间 < 1 秒
- [ ] 无明显卡顿

---

## 🔧 常见问题排查

### 问题 1：部署失败
- [ ] 查看部署日志
- [ ] 检查 package.json 脚本
- [ ] 确认环境变量正确
- [ ] 检查端口配置

### 问题 2：数据库连接失败
- [ ] 确认数据库服务已启动
- [ ] 检查环境变量引用语法
- [ ] 查看后端日志错误信息
- [ ] 测试数据库连接

### 问题 3：前端无法连接后端
- [ ] 检查 VITE_API_URL 是否正确
- [ ] 确认包含 /api 后缀
- [ ] 检查后端 CORS_ORIGIN
- [ ] 查看浏览器控制台错误

### 问题 4：页面显示异常
- [ ] 清除浏览器缓存
- [ ] 检查构建日志
- [ ] 确认 dist 目录生成
- [ ] 检查 nginx 配置

---

## 🎯 部署后配置

### 基础配置
- [ ] 配置自定义域名（可选）
- [ ] 设置 DNS CNAME 记录
- [ ] 等待 SSL 证书生成
- [ ] 测试 HTTPS 访问

### 安全配置
- [ ] 更改默认 JWT_SECRET
- [ ] 配置强密码策略
- [ ] 启用 HTTPS 强制跳转
- [ ] 配置 CORS 白名单

### 功能配置
- [ ] 添加 Gemini API Key
- [ ] 配置 SMTP 邮件
- [ ] 启用 Redis 缓存（可选）
- [ ] 配置文件上传（可选）

### 监控配置
- [ ] 设置告警通知
- [ ] 配置日志收集
- [ ] 启用性能监控
- [ ] 设置备份计划

---

## 📝 部署信息记录

### 服务地址
```
前端地址：https://___________________________
后端地址：https://___________________________
数据库地址：___________________________
```

### 环境变量
```
JWT_SECRET：___________________________
GEMINI_API_KEY：___________________________
```

### 部署时间
```
首次部署：2026-02-01 __:__
最后更新：___________________________
```

### 团队信息
```
部署人员：___________________________
联系方式：___________________________
```

---

## 🚀 下一步行动

### 立即执行
- [ ] 通知团队成员
- [ ] 分享访问地址
- [ ] 创建测试账户
- [ ] 导入测试数据

### 本周内完成
- [ ] 配置自定义域名
- [ ] 设置监控告警
- [ ] 编写使用文档
- [ ] 培训团队成员

### 持续优化
- [ ] 收集用户反馈
- [ ] 优化性能
- [ ] 添加新功能
- [ ] 定期备份数据

---

## 📚 相关文档

- 详细部署教程：`DEPLOY_NOW.md`
- Railway 教程：`部署教程-Railway.md`
- 免费方案对比：`免费部署方案.md`
- 操作指南：`OPERATIONS_GUIDE.md`
- API 文档：`server/API_DOCUMENTATION.md`

---

## ✅ 最终确认

- [ ] 所有检查项已完成
- [ ] 应用运行正常
- [ ] 团队已通知
- [ ] 文档已更新
- [ ] 备份已配置

---

**部署完成日期**：___________________________  
**签名**：___________________________

---

**祝贺！部署成功！** 🎉
